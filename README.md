# 框架名称 : gzb one
## 简介
这是一个**轻量级**、**高性能**的 Java Web 框架。它的核心理念是用最少的概念，解决开发者 90% 的问题，同时保留 10% 的底层控制力，以应对**极致性能**需求。它从头开始构建，旨在消除传统框架的臃肿和性能开销。

这不仅是一个 Web 框架，它还是一个**一站式解决方案**，一个强大的**低代码平台**。

---

## 性能提升：性能至上

### 概述
本报告旨在对比 **gzb one** 框架与主流 **Spring MVC** 框架在相同硬件和环境下的控制器层性能。
* **测试目标**：验证 gzb one 在处理基础 Web 请求时的性能优势。
* **测试用例**：一个简单的控制器方法，接收一个参数并返回一个 JSON 字符串。

### 压测环境
* **CPU**：AMD Ryzen 5 3600
* **JDK**：GraalVM 21.0.6
* **系统负载**：压测前已有 236 个进程和 5242 个线程，非理想的测试环境，更能体现框架在真实负载下的表现。
* **热身状况**：压测前都自动进行了 30% 压测量的热身。

### 性能压测数据最终汇总
| **线程数** | **框架** | **平均吞吐量 (次/秒)** | **领先 Spring 吞吐量** | **平均CPU占用** |
|:---|:---------------|:---|:---|:---|
| 1 | **gzb one** | **13,728** | **108.7%** | **7.80%** |
| | **spring mvc** | 6,578 | - | 8.70% |
| 3 | **gzb one** | **29,158** | **60.5%** | **20.04%** |
| | **spring mvc** | 18,170 | - | 24.96% |
| 6 | **gzb one** | **43,571** | **44.7%** | **30.5%** |
| | **spring mvc** | 30,118 | - | 45.6% |
| 12 | **gzb one** | **58,357** | **36.3%** | **40.1%** |
| | **spring mvc** | 42,808 | - | 64.9% |
| 100 | **gzb one** | **76,272** | **78.3%** | **36.5%** |
| | **spring mvc** | 42,769 | - | 64.7% |

详细压测日志请查看：
* [1线程压测日志](压测日志-1c.md)
* [3线程压测日志](压测日志-3c.md)
* [6线程压测日志](压测日志-6c.md)
* [12线程压测日志](压测日志-12c.md)
* [100线程压测日志](压测日志-100c.md)

### 性能总结
本框架在**单线程**压测中性能提升 **108.7%**，在 **100线程**超负载压测中，吞吐量提升高达 **78.3%**。
此外，持久层框架可以突破单条 SQL 执行上限 **5-30 倍**（框架内部自动逻辑优化）。

### 压测代码
你可以通过调用实例项目的 `/src/main/java/gzb/start/TestServerQPS.java` 来启动压测，进行对比。你也可以使用其他压测工具，但请确保测试环境的公平性。

---

## 核心特性
* **性能至上**
    * **动态编译**：支持对 `.java` 和 `.groovy` 文件的动态编译，代码修改后**实时生效**，无需重启应用。
    * **极致自实现**：核心仅依赖少量类库，避免了不必要的依赖。
    * **异步 SQL 智能合并**：持久层支持**异步 JDBC**，并能智能合并 SQL 操作，显著提升数据库交互效率。
* **功能大一统**
    * **持久层（ORM）**：既是一个完全面向对象的 ORM 框架，也支持手写 SQL，让开发者可以自由选择。
    * **控制器（Controller）**：可以无缝地将 Java 函数映射到 RESTful 端点。
    * **依赖注入（IOC）**：支持将 `@Service` 组件动态注入到 `@Resource` 注解的字段，提供了简洁的依赖管理。
    * **装饰器（AOP）**：可以轻松拦截或修改 HTTP 请求前后，实现日志、权限等横切关注点。
* **低代码能力**
    * **全自动代码生成**：根据数据库表信息，一键生成所有实体类、DAO 层代码及对应的 Web 界面。
    * **开箱即用**：提供了一整套工具，让你不仅可以快速开发，更能快速部署和运行。

---

## 理念与愿景
传统框架虽然提供了便利，但往往以牺牲性能和控制力为代价。
本框架则代表了一种不同的理念：通过消除不必要的运行时抽象，**优先考虑原始速度和效率**。它不仅仅是一个框架，更是你应用程序的**高性能引擎**。

---

## 快速上手指南
本指南将帮助你从零开始，快速启动并运行本框架。

### 第1步：获取源代码与数据库准备
1.  **获取项目**：从 GitHub 或其他代码仓库克隆本项目到本地。
2.  **数据库准备**：找到数据库脚本文件，导入到你的本地 MySQL 数据库中。

### 第2步：配置项目
1.  **导入项目**：使用 IntelliJ IDEA 打开项目。
2.  **添加依赖**：参考示例项目中的 `pom.xml` 文件，添加必要的 Maven 依赖，并同步项目。
3.  **创建与编辑配置文件**：
    * 在 `src/main/resources` 目录下创建 `application.properties` 文件。
    * 参考示例项目中的 `src/main/resources/application.properties`，其中内含详细注释。
4.  **配置数据库**：目前仅支持 MySQL。请按照注释配置数据库连接信息。
5.  **配置缓存与 Session**：如果你的项目使用 Redis，请配置 Redis 连接信息；如果不需要，请将 `session.type` 和 `cache.type` 设置为 `map`。
6.  **核心路径配置**：在配置文件中设置源代码目录（`gzb.system.code.dir`）、上传目录、静态资源目录、临时目录等。

### 第3步：代码生成与启动
1.  **生成代码**：参考示例项目中的 `/src/main/java/gzb/start/Auto.java`，运行其 `main` 方法，这会为你生成必要的实体类和 DAO 层代码以及基础后台管理UI。
2.  **运行项目**：参考示例项目的 `/src/main/java/gzb/start/Start.java`，运行其 `main` 方法以启动应用。

### 第4步：验证与探索
1.  **验证启动**：如果启动成功，控制台会显示 `server 1.0.0 started on port xxxx` 等日志信息。
2.  **开始使用**：通过浏览器访问 `http://127.0.0.1:你的端口/page/login.html`。登录账户和密码可以在数据库表 `sys_users` 中获取，默认管理员为 `admin`。

### 温馨提示
* **JDK**：本框架与 JDK 8 以上版本兼容。
* **数据库**：目前只支持 MySQL。
* 你无需关注 `entity` 和 `dao` 层，只需专注于 `service` 和 `controller` 的业务逻辑开发即可。

---

## 文档
* 示例项目 可以直接在 IntelliJ IDEA 运行。
* 持续更新中...